<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>クイズゲーム</title>
  <style>
    body { font-family: sans-serif; text-align: center; padding: 20px; }
    #quiz-container { max-width: 500px; margin: auto; }
    button { margin: 5px; padding: 10px 20px; font-size: 16px; }
    #feedback { margin-top: 15px; font-weight: bold; }
  </style>
</head>
<body>
  <div id="quiz-container">
    <h1>クイズゲーム</h1>
    <div id="game"></div>
  </div>

  <script>
    // ===== 問題データ =====
    const quizData = [
      { type: "choice", question: "お菓子のお製は？", options: ["源吉兆庵", "くろさわ", "たかまつ"], answer: "くろさわ" },
      { type: "text", question: "掛け軸は？(ひらがなで)", answer: "わきほうねんをきざす" },
      { type: "choice", question: "花入れは？", options: ["唐物手付籠(豊南作)", "虫籠(竹泉)", "朝鮮青磁"], answer: "唐物手付籠(豊南作)" },
      { type: "text", question: "香合は？(ひらがな)", answer: "きねのすすきず" },
      { type: "choice", question: "香合の作者は？", options: ["漆峯", "香雲", "秀穂"], answer: "秀穂" },
      { type: "text", question: "正客茶碗の作者は？(ひらがな)", answer: "かたやまたかお" },
      { type: "choice", question: "掛け軸の筆は？", options: ["太玄老師", "坐忘斎家元", "大亀老師"], answer: "坐忘斎家元" },
      { type: "text", question: "正客茶碗の名前は？(漢字１字)", answer: "萩" },
      { type: "choice", question: "次客茶碗は誰の写し？", options: ["如水", "仁清", "香雲"], answer:"仁清" },
      { type: "text", question: "次客茶碗の名前は？(漢字２字)", answer: "秋草" },
      { type: "choice", question: "次客茶碗の作者は？", options: ["如水", "仁清", "香雲"], answer: "如水" },
      { type: "choice", question: "薄茶器の作者は？", options: ["漆峯", "春齋", "秀穂"], answer: "春齋" },
      { type: "text", question: "薄茶器の名前は？(ひらがな)", answer: "つきあきくさまきえ" },
      { type: "choice", question: "茶杓の作者は？", options: ["太玄老師", "坐忘斎家元", "大亀老師"], answer: "太玄老師" },
      { type: "type", question: "茶杓の銘は？(漢字２字)", answer: "舞鶴" },
      { type: "type", question: "茶会名は？(漢字、茶会まで)", answer: "盛秋茶会" }
    ];

    let shuffled, current, score;

    // ===== ゲーム開始 =====
    function startGame() {
      shuffled = [...quizData].sort(() => Math.random() - 0.5).slice(0, 8);
      current = 0;
      score = 0;
      showQuestion();
    }

    // ===== 問題表示 =====
    function showQuestion() {
      const game = document.getElementById("game");
      const q = shuffled[current];

      let html = `<h2>第${current + 1}問</h2><p>${q.question}</p>`;

      if (q.type === "choice") {
        q.options.forEach(opt => {
          html += `<button onclick="checkAnswer('${opt}')">${opt}</button><br>`;
        });
      } else {
        html += `<input type="text" id="answerInput"><br>
                 <button onclick="checkAnswer(document.getElementById('answerInput').value)">回答</button>`;
      }

      html += `<div id="feedback"></div>`;
      document.getElementById("game").innerHTML = html;
    }

    // ===== 答え合わせ =====
    function checkAnswer(answer) {
      const q = shuffled[current];
      const feedback = document.getElementById("feedback");

      if (answer.trim() === q.answer) {
        feedback.innerHTML = "✅ 正解！";
        score++;
      } else {
        feedback.innerHTML = `❌ 不正解！ 正解は「${q.answer}」です`;
      }

      feedback.innerHTML += `<br><button onclick="nextQuestion()">次の問題へ</button>`;
    }

    // ===== 次の問題へ =====
    function nextQuestion() {
      current++;
      if (current < shuffled.length) {
        showQuestion();
      } else {
        showResult();
      }
    }

    // ===== 結果表示 =====
    function showResult() {
      const game = document.getElementById("game");
      game.innerHTML = `<h2>結果発表</h2>
                        <p>あなたのスコアは ${score}/${shuffled.length} です！</p>
                        <button onclick="startGame()">もう一度プレイ</button>`;
    }

    // 初期画面
    document.getElementById("game").innerHTML =
      `<button onclick="startGame()">スタート</button>`;
  </script>
</body>
</html>
